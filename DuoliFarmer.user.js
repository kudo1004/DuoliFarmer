// ==UserScript==
// @name         DuoliFarmer
// @namespace    https://tampermonkey.net
// @version      1.0
// @description  DuoliFarmer giúp bạn tăng Xp Duolingo siêu nhanh!
// @author       kudodz
// @match        https://*.duolingo.com/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=duolingopro.net
// @grant        none
// @license      none
// @downloadURL https://raw.githubusercontent.com/kudo1004/DuoliFarmer/refs/heads/main/DuoliFarmer.user.js
// @updateURL https://raw.githubusercontent.com/kudo1004/DuoliFarmer/refs/heads/main/DuoliFarmer.meta.js
// ==/UserScript==


(function() {
    'use strict';

    const _0x15c020=_0x2be0;(function(_0x5bf11b,_0x1f5277){const _0x407a54=_0x2be0,_0x5569dc=_0x5bf11b();while(!![]){try{const _0x5b1795=-parseInt(_0x407a54(0x1f3))/0x1*(parseInt(_0x407a54(0x1c6))/0x2)+-parseInt(_0x407a54(0x1f7))/0x3*(parseInt(_0x407a54(0x1dc))/0x4)+parseInt(_0x407a54(0x1eb))/0x5+-parseInt(_0x407a54(0x1d6))/0x6*(-parseInt(_0x407a54(0x1ac))/0x7)+-parseInt(_0x407a54(0x1b2))/0x8*(-parseInt(_0x407a54(0x1a8))/0x9)+parseInt(_0x407a54(0x1c9))/0xa+parseInt(_0x407a54(0x1df))/0xb;if(_0x5b1795===_0x1f5277)break;else _0x5569dc['push'](_0x5569dc['shift']());}catch(_0x1f0653){_0x5569dc['push'](_0x5569dc['shift']());}}}(_0x2bef,0x23652));const sessionUrl=_0x15c020(0x1d8);function _0x2bef(){const _0x19badd=['json','completeReverseTranslation','Chờ\x20một\x20chút...','78pEQBOf','tapDescribe','https://www.duolingo.com/2017-06-30/sessions','\x0a<div\x20class=\x22_container\x22\x20id=\x22_container\x22>\x0a\x20\x20<div\x20class=\x22_header\x22><p\x20class=\x22_title\x22>DuoliFarmer</p></div>\x0a\x20\x20<div\x20class=\x22_description\x22><p\x20id=\x22_loginStatus\x22>Đây\x20là\x20phiên\x20bản\x20mini\x20nên\x20sẽ\x20bị\x20giới\x20hạn.</p></div>\x0a\x20\x20<div\x20class=\x22_content\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22_radioButtons\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22active\x22\x20data-option=\x2210\x22>Auto</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<button\x20class=\x22_startBtn\x22\x20id=\x22_startBtn\x22>Bắt\x20Đầu\x20Farm</button>\x0a\x20\x20</div>\x0a\x20\x20<footer\x20class=\x22_footer\x22>\x0a\x20\x20\x20\x20<a\x20href=\x22https://r.naturelye.com/discord\x22\x20target=\x22_blank\x22>Discord</a>\x0a\x20\x20\x20\x20<span\x20id=\x22_version\x22\x20class=\x22_version\x22>v1.0</span>\x0a\x20\x20</footer>\x0a</div>\x0a<button\x20class=\x22_toggleBtn\x22\x20id=\x22_toggleBtn\x22>→</button>\x0a<div\x20class=\x22_overlay\x22\x20id=\x22_loadingOverlay\x22>\x0a\x20\x20<div\x20class=\x22_swalModal\x22>\x0a\x20\x20\x20\x20<h2>DuoliFarmer</h2>\x0a\x20\x20\x20\x20<p\x20id=\x22_loadingMessage\x22>Liên\x20hệ\x20Discord\x20của\x20tôi\x20để\x20được\x20hỗ\x20trợ.</p>\x0a\x20\x20\x20\x20<div\x20class=\x22_spinner\x22\x20id=\x22_spinner\x22></div>\x0a\x20\x20\x20\x20<div\x20class=\x22_hint\x22\x20id=\x22_hint\x22>Bạn\x20Không\x20Nên\x20Farm\x20Quá\x20Lâu\x20Để\x20Tránh\x20Bị\x20Ban!</div>\x0a\x20\x20\x20\x20<div\x20class=\x22_xpInfo\x22>+\x20<span\x20id=\x22_xpAmount\x22>0</span>\x20XP</div>\x0a\x20\x20\x20\x20<button\x20id=\x22_stopOverlayBtn\x22>Dừng</button>\x0a\x20\x20</div>\x0a</div>','writeComprehension','reverseAssist','843032CCrLCd','characterMatch','listenMatch','624107JxAJlw','floor','assist','listenIsolation','extendedMatch','click','match','display','replace','gapFill','Chào\x20<strong>','getElementById','1190460UcfFhI','Bạn\x20chưa\x20đăng\x20nhập!\x20(Nếu\x20bạn\x20đã\x20đăng\x20nhập,\x20hãy\x20tải\x20lại\x20trang\x20này)','disabled','svgPuzzle','selectTranscription','trim','radioImageSelect','classList','3aulINQ','_startBtn','startsWith','patternTapComplete','3JmeDsp','tapComplete','innerText','</strong>!\x20<br>Liên\x20hệ\x20với\x20Discord\x20của\x20tôi\x20để\x20được\x20hỗ\x20trợ.','GLOBAL_PRACTICE','dialogue','listen','readComprehension','PUT','name','syllableListenTap','tapCompleteTable','transliterate','beforeend','characterIntro','createElement','_loadingOverlay','xpGain','judge','jwt_token=','radioListenRecognize','558eiGgGE','_loginStatus','form','typeCloze','23268uBASuZ','syllableTap','typeCompleteTable','now','radioSelect','cookie','19336dLfQbP','innerHTML','hidden','sub','POST','toggle','_stopOverlayBtn','Bearer\x20','split','selectPronunciation','radioListenMatch','?fields=username,fromLanguage,learningLanguage','partialReverseTranslate','listenSpeak','addEventListener','typeComplete','characterTrace','_container','transliterationAssist','characterSelect','123392ZsWzEy','find','application/json','529290mxsklw','head','extendedListenMatch','characterPuzzle','freeResponse','orderTapComplete','typeClozeTable','none','listenComplete','stringify'];_0x2bef=function(){return _0x19badd;};return _0x2bef();}let isFarming=![],isVisible=!![];function _0x2be0(_0x511736,_0x355fc5){const _0x2befd5=_0x2bef();return _0x2be0=function(_0x2be0fc,_0x3013c0){_0x2be0fc=_0x2be0fc-0x19c;let _0x45ef6e=_0x2befd5[_0x2be0fc];return _0x45ef6e;},_0x2be0(_0x511736,_0x355fc5);}const getJwtToken=()=>{const _0x28ff3c=_0x15c020,_0x346aae=document[_0x28ff3c(0x1b1)][_0x28ff3c(0x1ba)](';')[_0x28ff3c(0x1c7)](_0x207ac5=>_0x207ac5[_0x28ff3c(0x1f0)]()[_0x28ff3c(0x1f5)](_0x28ff3c(0x1a6)));return _0x346aae?_0x346aae[_0x28ff3c(0x1ba)]('=')[0x1]:null;},decodeJwtToken=_0x83d20c=>{const _0x376fe2=_0x15c020,_0x463a7a=_0x83d20c['split']('.')[0x1][_0x376fe2(0x1e7)](/-/g,'+')[_0x376fe2(0x1e7)](/_/g,'/');return JSON['parse'](atob(_0x463a7a));},formatHeaders=_0xed1e57=>({'Content-Type':_0x15c020(0x1c8),'Authorization':_0x15c020(0x1b9)+_0xed1e57,'User-Agent':navigator['userAgent']}),getUserInfo=async(_0xe45e58,_0x2646a7)=>{const _0x1ae38f=_0x15c020,_0x55c1b6=await fetch('https://www.duolingo.com/2017-06-30/users/'+_0xe45e58+_0x1ae38f(0x1bd),{'headers':_0x2646a7});return await _0x55c1b6['json']();},farmXp=async(_0x3c3013,_0x34756e,_0x516e60)=>{const _0x3d0d2e=_0x15c020;while(isFarming){try{const _0xf73dab=await fetch(sessionUrl,{'method':_0x3d0d2e(0x1b6),'headers':_0x3c3013,'body':JSON['stringify'](_0x34756e)}),_0x3fd8d4=await _0xf73dab[_0x3d0d2e(0x1d3)](),_0x28ea56=await fetch(sessionUrl+'/'+_0x3fd8d4['id'],{'method':_0x3d0d2e(0x1ff),'headers':_0x3c3013,'body':JSON[_0x3d0d2e(0x1d2)]({..._0x3fd8d4,..._0x516e60})}),_0x19dc21=await _0x28ea56['json'](),_0x41a673=document[_0x3d0d2e(0x1ea)]('_xpAmount');_0x41a673[_0x3d0d2e(0x1f9)]=parseInt(_0x41a673[_0x3d0d2e(0x1f9)])+_0x19dc21[_0x3d0d2e(0x1a4)];}catch(_0x469829){await new Promise(_0x47cdb5=>setTimeout(_0x47cdb5,0x1388));}}},initDuoFarmer=async()=>{const _0x5dca49=_0x15c020,_0x3e5d8c=_0x5dca49(0x1d9);document['body']['insertAdjacentHTML'](_0x5dca49(0x1a0),_0x3e5d8c);const _0x5c35cc=document[_0x5dca49(0x1a2)]('style');_0x5c35cc[_0x5dca49(0x1b3)]='._container,._toggleBtn{right:10px;position:fixed}._footer\x20a,._startBtn,._swalModal\x20h2,._title{font-weight:700}._container{bottom:50px;width:250px;padding:12px;background:#fff;border:2px\x20solid\x20#28a745;border-radius:12px;box-shadow:0\x208px\x2020px\x20rgba(0,0,0,.3),0\x204px\x208px\x20rgba(0,0,0,.1);transition:transform\x20.5s,opacity\x20.5s;z-index:9999}.hidden{transform:translateX(110%);opacity:0}._toggleBtn{top:40%;transform:translateY(-50%);width:35px;height:35px;background:#28a745;color:#fff;border:none;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0\x204px\x208px\x20rgba(0,0,0,.2);transition:transform\x20.3s;z-index:10000}._toggleBtn:active{transform:translateY(-50%)\x20scale(.9)}._header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}._title{font-size:1.1rem;color:#28a745}._description,._radioButtons{font-size:.9rem;margin-bottom:15px}._description{padding:8px;background:#f9f9f9;border-left:4px\x20solid\x20#28a745;border-radius:8px;box-shadow:0\x202px\x204px\x20rgba(0,0,0,.1);color:#444}._radioButtons\x20button.active,._startBtn{background:#28a745;color:#fff}._radioButtons{display:flex;flex-wrap:wrap;gap:8px}._radioButtons\x20button{flex:1\x201\x20calc(33.333%\x20-\x208px);padding:8px;background:#e9f5e9;border:2px\x20solid\x20#28a745;color:#28a745;border-radius:8px;cursor:pointer;transition:background\x20.3s,color\x20.3s}._radioButtons\x20button:disabled,._radioButtons\x20button:disabled.active{background:#f0f0f0;color:#bbb;border:2px\x20solid\x20#ccc;cursor:not-allowed}._startBtn{width:100%;padding:10px;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color\x20.3s}._overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);display:none;align-items:center;justify-content:center;z-index:9999;animation:.3s\x20overlayFadeIn}._swalModal{background:#fff;border-radius:5px;padding:20px;width:30em;max-width:100%;text-align:center;position:relative;box-shadow:0\x200\x2020px\x20rgba(0,0,0,.2);animation:.3s\x20modalPopIn}._swalModal\x20h2{color:#00aa28;font-size:1.7em;margin:0\x200\x20.4em}._swalModal\x20p{color:#777;font-size:1em;margin:.4em\x200}._swalModal\x20._hint{color:#aaa;font-size:.9em;margin:.4em\x200}._swalModal\x20._xpInfo{color:#00ae57;font-size:1.1em;margin:1em\x200}._swalModal\x20button{background-color:#c70f4f;color:#fff;border:0;border-radius:.5em;font-size:1.075em;padding:10px\x2024px;margin:15px\x205px\x200;cursor:pointer;box-shadow:0\x202px\x205px\x20rgba(0,0,0,.15)}._spinner{display:inline-block;width:70px;height:70px;margin:15px}._spinner:after{content:\x22\x20\x22;display:block;width:64px;height:64px;border-radius:50%;border:6px\x20solid\x20#3085d6;border-color:#3085d6\x20transparent;animation:1.2s\x20linear\x20infinite\x20spinnerRotate}._footer{margin-top:10px;font-size:.85rem;display:flex;justify-content:space-between}._footer\x20a{color:#002d75;font-style:italic}._version{font-size:.9rem;color:#888}@keyframes\x20spinnerRotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}',document[_0x5dca49(0x1ca)]['appendChild'](_0x5c35cc);const _0x3a37bc=getJwtToken();if(!_0x3a37bc){document[_0x5dca49(0x1ea)](_0x5dca49(0x1f4))['disabled']=!![],document[_0x5dca49(0x1ea)]('_loginStatus')[_0x5dca49(0x1f9)]=_0x5dca49(0x1ec);return;}const _0x48d398=formatHeaders(_0x3a37bc),{username:_0x9b85aa,fromLanguage:_0x4e39a3,learningLanguage:_0x9180}=await getUserInfo(decodeJwtToken(_0x3a37bc)[_0x5dca49(0x1b5)],_0x48d398);document[_0x5dca49(0x1ea)](_0x5dca49(0x1a9))[_0x5dca49(0x1b3)]=_0x5dca49(0x1e9)+_0x9b85aa+_0x5dca49(0x1fa);const _0x375337={'challengeTypes':[_0x5dca49(0x1e1),_0x5dca49(0x1a1),_0x5dca49(0x1dd),_0x5dca49(0x1cc),_0x5dca49(0x1c5),_0x5dca49(0x1c2),'characterWrite',_0x5dca49(0x1d4),'definition',_0x5dca49(0x1fc),_0x5dca49(0x1e3),_0x5dca49(0x1cb),_0x5dca49(0x1aa),_0x5dca49(0x1cd),_0x5dca49(0x1e8),_0x5dca49(0x1a5),_0x5dca49(0x1fd),_0x5dca49(0x1d1),_0x5dca49(0x1de),_0x5dca49(0x1e5),_0x5dca49(0x19c),'listenComprehension',_0x5dca49(0x1e2),_0x5dca49(0x1bf),'listenTap',_0x5dca49(0x1ce),'partialListen',_0x5dca49(0x1be),_0x5dca49(0x1f6),'radioBinary',_0x5dca49(0x1f1),_0x5dca49(0x1bc),_0x5dca49(0x1a7),_0x5dca49(0x1b0),_0x5dca49(0x1fe),_0x5dca49(0x1db),'sameDifferent','select',_0x5dca49(0x1bb),_0x5dca49(0x1ef),_0x5dca49(0x1ee),_0x5dca49(0x1ad),_0x5dca49(0x19d),'speak','tapCloze','tapClozeTable',_0x5dca49(0x1f8),_0x5dca49(0x19e),_0x5dca49(0x1d7),'translate',_0x5dca49(0x19f),_0x5dca49(0x1c4),_0x5dca49(0x1ab),_0x5dca49(0x1cf),_0x5dca49(0x1c1),_0x5dca49(0x1ae),_0x5dca49(0x1da)],'fromLanguage':_0x4e39a3,'learningLanguage':_0x9180,'type':_0x5dca49(0x1fb)},_0x5d48d2={'heartsLeft':0x0,'startTime':Math[_0x5dca49(0x1e0)](Date[_0x5dca49(0x1af)]()/0x3e8),'enableBonusPoints':![],'endTime':Math[_0x5dca49(0x1e0)](Date[_0x5dca49(0x1af)]()/0x3e8)+0x70,'failed':![],'maxInLessonStreak':0x9,'shouldLearnThings':!![]},_0x20bcc3=document[_0x5dca49(0x1ea)]('_toggleBtn');_0x20bcc3[_0x5dca49(0x1c0)](_0x5dca49(0x1e4),()=>{const _0x3b79a5=_0x5dca49;isVisible=!isVisible;const _0x4268f1=document['getElementById'](_0x3b79a5(0x1c3));_0x4268f1[_0x3b79a5(0x1f2)][_0x3b79a5(0x1b7)](_0x3b79a5(0x1b4),!isVisible),_0x20bcc3[_0x3b79a5(0x1f9)]=isVisible?'→':'←';});const _0xf0a093=document[_0x5dca49(0x1ea)](_0x5dca49(0x1f4));_0xf0a093[_0x5dca49(0x1c0)](_0x5dca49(0x1e4),()=>{const _0x3a4a71=_0x5dca49;document[_0x3a4a71(0x1ea)](_0x3a4a71(0x1a3))['style']['display']='flex',isFarming=!![],farmXp(_0x48d398,_0x375337,_0x5d48d2);}),document[_0x5dca49(0x1ea)](_0x5dca49(0x1b8))['addEventListener'](_0x5dca49(0x1e4),()=>{const _0x488ac1=_0x5dca49;document['getElementById'](_0x488ac1(0x1a3))['style'][_0x488ac1(0x1e6)]=_0x488ac1(0x1d0),isFarming=![],_0xf0a093[_0x488ac1(0x1ed)]=!![],_0xf0a093[_0x488ac1(0x1f9)]=_0x488ac1(0x1d5),setTimeout(()=>{const _0x3784d8=_0x488ac1;_0xf0a093[_0x3784d8(0x1ed)]=![],_0xf0a093[_0x3784d8(0x1f9)]='Bắt\x20Đầu\x20Farm';},0x7d0);});};initDuoFarmer();
})();
